{"version":3,"sources":["api.js","Pagination.jsx","Popup.jsx","Table.jsx","App.js","index.js"],"names":["getGames","a","fetch","process","response","json","Pagination","page","count","total","paginate","prevPage","nextPage","pagesCount","Math","ceil","pageNumber","i","push","className","href","onClick","map","num","Popup","game","closePopup","title","game_url","short_description","genre","platform","publisher","developer","thumbnail","popupRef","useRef","handleOutsideClick","event","path","composedPath","includes","current","useEffect","document","body","addEventListener","removeEventListener","ref","src","alt","target","rel","type","Table","useState","games","setGames","setPage","activeSorting","setActiveSorting","descending","setDescending","value","setValue","filteredGames","setFilteredGames","popupId","setPopupId","handleClick","e","textContent","lastIndex","firstIndex","sort","b","localeCompare","pagination","length","prev","data","find","id","filter","toLowerCase","then","onChange","placeholder","width","height","viewBox","fill","xmlns","d","index","slice","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d4349774.chunk.js","sourcesContent":["const API_KEY = process.env.REACT_APP_API_KEY;\n\nexport const getGames = async () => {\n  const response = await fetch(\"https://free-to-play-games-database.p.rapidapi.com/api/games\", {\n    \"method\": \"GET\",\n    \"headers\": {\n      \"x-rapidapi-host\": \"free-to-play-games-database.p.rapidapi.com\",\n      \"x-rapidapi-key\": API_KEY\n    }\n  });\n  return await response.json();\n};\n","import React from 'react'\n\nexport default function Pagination({ page, count, total, paginate, prevPage, nextPage }) {\n  const pagesCount = Math.ceil(total / count);\n\n  const pageNumber = [];\n  for (let i = 1; i <= pagesCount; i++) {\n    pageNumber.push(i);\n  }\n\n  return (\n    <ul className=\"pagination\">\n      <li className={page === 1 ? \"disabled\" : \"waves-effect\"}>\n        <a href=\"#!\" onClick={page === 1 ? (() => { }) : prevPage}>\n          <i className=\"material-icons\">chevron_left</i>\n        </a>\n      </li>\n      {pageNumber.map(num => <li key={num} className={`waves-effect ${page === num && \"active\"}`}>\n        <a href=\"#!\" onClick={() => paginate(num)}>{num}</a>\n      </li>)}\n      <li className={page === pagesCount ? \"disabled\" : \"waves-effect\"}>\n        <a href=\"#!\" onClick={page === pagesCount ? (() => { }) : nextPage}>\n          <i className=\"material-icons\">chevron_right</i>\n        </a>\n      </li>\n    </ul>\n  );\n}\n","import { useEffect, useRef } from 'react'\n\nexport default function Popup({ game, closePopup }) {\n  const { title, game_url, short_description, genre, platform, publisher, developer, thumbnail } = game;\n  const popupRef = useRef();\n\n  const handleOutsideClick = event => {\n    const path = event.path || (event.composedPath && event.composedPath());\n    if (!path.includes(popupRef.current)) {\n      closePopup(null);\n    }\n  };\n\n  useEffect(() => {\n    document.body.addEventListener('click', handleOutsideClick);\n\n    return () => {\n      document.body.removeEventListener('click', handleOutsideClick);\n    }\n  }, []); // eslint-disable-line\n\n  return (\n    <div className=\"card game\" ref={popupRef}>\n      <div className=\"card-image\">\n        <img className=\"game-poster\" src={thumbnail} alt=\"Poster\" />\n        <div className=\"card-content\">\n          <h5 className=\"indigo-text\">{title}</h5>\n          <div>\n            <p className=\"genre\"><span className=\"category\">Жанр:</span> {genre}</p>\n            <p className=\"platform\"><span className=\"category\">Платформа:</span> {platform}</p>\n            <p className=\"platform\"><span className=\"category\">Разработчик:</span> {developer}</p>\n            <p className=\"platform\"><span className=\"category\">Издатель:</span> {publisher}</p>\n          </div>\n          <p><span className=\"category\">Описание:</span> {short_description}</p>\n        </div>\n      </div>\n      <a className=\"waves-light btn\" href={game_url} target=\"_blank\" rel=\"noopener noreferrer\">Сайт игры</a>\n      <button className=\"modal-close\" type=\"button\" onClick={() => closePopup(null)}>Закрыть</button>\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { getGames } from './api';\nimport Pagination from './Pagination';\nimport Popup from './Popup';\n\nexport default function Table() {\n  const [games, setGames] = useState([]);\n  const [page, setPage] = useState(1);\n  const [count, setCount] = useState(50); // eslint-disable-line\n  const [activeSorting, setActiveSorting] = useState('');\n  const [descending, setDescending] = useState(true);\n  const [value, setValue] = useState('');\n  const [filteredGames, setFilteredGames] = useState(games);\n  const [popupId, setPopupId] = useState(null);\n\n  const handleClick = (e) => {\n    setDescending(!descending);\n    setActiveSorting(e.target.textContent);\n  };\n\n  const paginate = (pageNumber) => setPage(pageNumber);\n  const prevPage = () => setPage(prev => prev - 1);\n  const nextPage = () => setPage(prev => prev + 1);\n\n\n  const lastIndex = page * count;\n  const firstIndex = lastIndex - count;\n\n  switch (activeSorting) {\n    case 'Наименование':\n      if (descending) {\n        filteredGames.sort((a, b) => b.title.localeCompare(a.title));\n      } else {\n        filteredGames.sort((a, b) => a.title.localeCompare(b.title));\n      }\n      break;\n\n    case 'Издатель':\n      if (descending) {\n        filteredGames.sort((a, b) => b.publisher.localeCompare(a.publisher));\n      } else {\n        filteredGames.sort((a, b) => a.publisher.localeCompare(b.publisher));\n      }\n      break;\n\n    default:\n      break;\n  }\n\n  const pagination = <Pagination\n    page={page}\n    count={count}\n    total={filteredGames.length}\n    paginate={paginate}\n    prevPage={prevPage}\n    nextPage={nextPage}\n  />\n\n  const data = {\n    game: filteredGames.find(game => game.id === popupId),\n    closePopup: setPopupId\n  };\n\n  useEffect(() => {\n    setFilteredGames(games);\n  }, [games]);\n\n  useEffect(() => {\n    setFilteredGames(games.filter(game => game.title.toLowerCase().includes(value.toLowerCase())));\n    setPage(1);\n  }, [value]); // eslint-disable-line\n\n  useEffect(() => {\n    getGames().then((data) => setGames(data));\n  }, []);\n\n  return (\n    <div className=\"container\">\n      <input\n        type=\"text\"\n        onChange={(e) => setValue(e.target.value)}\n        value={value}\n        placeholder=\"Поиск игры по наименованию\"\n      />\n      {pagination}\n      <table className=\"centered highlight\">\n        <thead>\n          <tr className=\"row headline-row\">\n            <th>№</th>\n            <th></th>\n            <th\n              className={\"headline\"}\n              onClick={(e) => handleClick(e)} >\n              <svg\n                className={`${activeSorting === 'Наименование' ? 'red-arrow' : ''} ${activeSorting === 'Наименование' && descending ? 'rotated' : ''}`}\n                width=\"10\"\n                height=\"6\"\n                viewBox=\"0 0 10 6\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z\" fill=\"#2C2C2C\" />\n              </svg>\n              Наименование</th>\n            <th\n              className={\"headline\"}\n              onClick={(e) => handleClick(e)}>\n              <svg\n                className={`${activeSorting === 'Издатель' ? 'red-arrow' : ''} ${activeSorting === 'Издатель' && descending ? 'rotated' : ''}`}\n                width=\"10\"\n                height=\"6\"\n                viewBox=\"0 0 10 6\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M10 5C10 5.16927 9.93815 5.31576 9.81445 5.43945C9.69075 5.56315 9.54427 5.625 9.375 5.625H0.625C0.455729 5.625 0.309245 5.56315 0.185547 5.43945C0.061849 5.31576 0 5.16927 0 5C0 4.83073 0.061849 4.68424 0.185547 4.56055L4.56055 0.185547C4.68424 0.061849 4.83073 0 5 0C5.16927 0 5.31576 0.061849 5.43945 0.185547L9.81445 4.56055C9.93815 4.68424 10 4.83073 10 5Z\" fill=\"#2C2C2C\" />\n              </svg>\n              Издатель</th>\n          </tr>\n        </thead>\n        <tbody>\n          {filteredGames.map((game, index) => {\n            return (\n              <tr\n                className=\"row\"\n                key={game.id}\n                onClick={() => setPopupId(game.id)}\n              >\n                <td>{++index}</td>\n                {<td>\n                  <img className=\"game-cover\" src={game.thumbnail} alt=\"Game Cover\" />\n                </td>}\n                <td className=\"game-title\">{game.title}</td>\n                <td>{game.publisher}\n                </td>\n              </tr>\n            );\n          }).slice(firstIndex, lastIndex)}\n        </tbody>\n      </table>\n      {pagination}\n      {popupId && <Popup {...data} />}\n    </div >\n  );\n}\n","import Table from './Table';\n\nimport './App.css';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Table />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}